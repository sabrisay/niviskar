Here’s a draft Confluence page you can use to document your log storage and processing architecture:

⸻

Log Storage and Processing Architecture

This document outlines the architecture used to store and process application logs within our environment. The system is designed for durability, observability, and real-time alerting.

Overview

Our application logs are generated by workloads running on EC2 instances. These logs are stored on attached EBS volumes and then shipped using Filebeat. The logs flow through Logstash for enrichment or parsing before being indexed into Elasticsearch or OpenSearch. Alerting is managed through watchers that trigger PagerDuty notifications for critical conditions.

Architecture Diagram

![Log Architecture Diagram](Insert Diagram Here)

(Diagram shows the flow from EC2 logs → EBS → Filebeat → Logstash → Elasticsearch/OpenSearch → PagerDuty)

Components

1. EC2 Instances + EBS Volumes
	•	Applications generate logs in real-time.
	•	Logs are written to EBS volumes for persistence.
	•	EBS volumes are attached to the respective EC2 instances hosting the applications.

2. Filebeat
	•	Filebeat agents are deployed on EC2 instances.
	•	They monitor log files on EBS volumes.
	•	Efficiently forwards log data to Logstash with minimal overhead.

3. Logstash
	•	Receives logs from Filebeat.
	•	Parses, filters, and enriches the data.
	•	Prepares logs for indexing in Elasticsearch/OpenSearch.

4. Elasticsearch / OpenSearch
	•	Stores and indexes the log data for fast searching and analysis.
	•	Queries can be used for dashboards, troubleshooting, and auditing.
	•	Contains watchers (alerts) configured to monitor specific conditions.

5. PagerDuty
	•	Integrated with Elasticsearch/OpenSearch Watchers.
	•	Automatically sends alert notifications when defined conditions are met (e.g., high error rates, failed transactions).
	•	Ensures prompt incident response.

Alerting & Monitoring
	•	Watchers are JSON-based configurations that monitor log patterns and thresholds.
	•	Triggering conditions include:
	•	Error spikes
	•	Unusual traffic patterns
	•	Security anomalies
	•	Alerts are routed to PagerDuty for escalation and visibility.

Maintenance Notes
	•	Ensure Filebeat versions match the stack compatibility.
	•	Periodically validate watchers and alerting conditions.
	•	Clean up old indices from Elasticsearch/OpenSearch to manage storage.

⸻

Let me know if you want the image exported as a downloadable file or if you’d like a version with updated branding or layout. ￼